
<form id="formProcess" *ngIf="operation === operationEnum.QUERY">

  <div class="card md-4">
    <!--<h6 class="card-header">Search</h6>-->
    <div class="card-header with-elements">
      <span class="card-header-title mr-2">{{ 'general.title.search' | translate }}</span>
      <div class="card-header-elements ml-md-auto">
        <button type="button" class="btn btn-xs btn-outline-primary" (click)="newProcess()">
          <span class="ion ion-md-add"></span>
          {{ 'process.new' | translate }}
        </button>
      </div>
    </div>

    <div class="card-body">

      <div class="form-row">
        <div class="form-group col-md-4">
          <label class="form-label">{{ 'general.label.name' | translate }}</label>
          <input id="idName" name="idName" type="text" 
              class="form-control" placeholder="{{ 'general.label.name' | translate }}"/>
        </div>

        <div class="form-group col-md-4">
          <label class="form-label">{{ 'general.label.status' | translate }}:</label>
          <select id="idStatus" name="idStatus" class="custom-select">
            <option [ngValue]="null">{{ 'general.label.select' | translate }}</option>
          </select>
        </div>
      </div>

      <div class="text-right">
        <button id="idBtnClear" type="button" class="btn btn-default mr-2" (click)="cleanFilter()">{{ 'general.button.clear' | translate }}</button>
        <button id="idBtnSearch" type="button" class="btn btn-default" (click)="find()">{{ 'general.button.search' | translate }}</button>      
      </div>
    </div>
  </div>

  <br/>
  <br/>

  <div class="card" *ngIf="totalRecords" >
    <div class="card-header">{{ 'agent.result' | translate }}</div>
    <p-table [value]="jobs" 
             [paginator]="true"
             [rows]="5"
             [rowsPerPageOptions]="[5, 10]"
             [lazy]="true"
             [totalRecords]="totalRecords"
             (onLazyLoad)="loadJobs($event)"
             styleClass="table-responsive"
             tableStyleClass="table table-striped table-bordered">
      <ng-template pTemplate="header">
        <tr>
          <th>{{ 'process.label.id' | translate }}</th>
          <th style="width: 20%;">{{ 'process.label.typeexecution' | translate }}</th>
          <th style="width: 20%;">{{ 'general.label.status' | translate }}</th>
          <th class="text-center" style="width: 15%;">{{ 'general.label.options' | translate }}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-job>
        <tr>
          <td>{{ job.idProcess }}</td>
          <td>{{ (job.typeExecution === typeExecutionEnum.AUTO) ? ('process.label.auto' | translate) : ('process.label.manual' | translate) }}</td>
          <td>{{ (job.status === statusEnum.ENABLED) ? ('general.label.enabled' | translate) : ('general.label.disabled' | translate) }}</td>
          <td class="text-center">
            <button type="button" class="btn btn-xs btn-outline-secondary ml-1" (click)="editProcess(job)" [title]="'general.button.edit' | translate">
              <span class="ion ion-md-create"></span>
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</form>